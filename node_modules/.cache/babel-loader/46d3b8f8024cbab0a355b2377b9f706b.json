{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _parseInt from \"@babel/runtime-corejs2/core-js/parse-int\";\nimport _Promise from \"@babel/runtime-corejs2/core-js/promise\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport React, { Component } from \"react\";\nimport { Card, Button, Table } from \"semantic-ui-react\";\nimport tracker from \"../ethereum/tracker\";\nimport Layout from \"../components/Layout\";\nimport { Link } from \"../routes\";\nimport web3 from \"../ethereum/web3\";\nimport AssetRow from \"../components/AssetRow\";\n\nvar AssetTracker =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(AssetTracker, _Component);\n\n  function AssetTracker() {\n    _classCallCheck(this, AssetTracker);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(AssetTracker).apply(this, arguments));\n  }\n\n  _createClass(AssetTracker, [{\n    key: \"renderbuyers\",\n    value: function renderbuyers() {\n      var items = this.props.buyers.map(function (address) {\n        return {\n          header: address,\n          description: \"\",\n          fluid: true\n        };\n      });\n      return React.createElement(Card.Group, {\n        items: items\n      });\n    }\n  }, {\n    key: \"renderproducers\",\n    value: function renderproducers() {\n      var items = this.props.producers.map(function (address) {\n        return {\n          header: address,\n          description: \"\",\n          fluid: true\n        };\n      });\n      return React.createElement(Card.Group, {\n        items: items\n      });\n    }\n  }, {\n    key: \"renderRows\",\n    value: function renderRows() {\n      return this.props.assets.map(function (asset, index) {\n        return React.createElement(AssetRow, {\n          key: index,\n          id: index,\n          asset: asset //address={this.props.owner}\n\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var Header = Table.Header,\n          Row = Table.Row,\n          HeaderCell = Table.HeaderCell,\n          Body = Table.Body;\n      return React.createElement(Layout, null, React.createElement(\"h3\", null, \" List of all producers! \"), React.createElement(\"div\", null, this.renderproducers()), React.createElement(\"div\", null, React.createElement(\"link\", {\n        rel: \"stylesheet\",\n        href: \"//cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.3.1/semantic.min.css\"\n      }), React.createElement(\"h3\", null, \" List of all Purchesers! \"), this.renderbuyers()), React.createElement(\"h3\", null, \" Asset details! \"), React.createElement(Table, null, React.createElement(Header, null, React.createElement(Row, null, React.createElement(HeaderCell, null, \"ID\"), React.createElement(HeaderCell, null, \"Name\"), React.createElement(HeaderCell, null, \"Description\"), React.createElement(HeaderCell, null, \"Manufacturer\"), React.createElement(HeaderCell, null, \"Price\"), React.createElement(HeaderCell, null, \"Address of Owner\"))), React.createElement(Body, null, this.renderRows())));\n    }\n  }], [{\n    key: \"getInitialProps\",\n    value: function () {\n      var _getInitialProps = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(props) {\n        var buyers, producers, assetCount, id, assets;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return tracker.methods.getbuyers().call();\n\n              case 2:\n                buyers = _context.sent;\n                _context.next = 5;\n                return tracker.methods.getproducers().call();\n\n              case 5:\n                producers = _context.sent;\n                _context.next = 8;\n                return tracker.methods.assetsCount().call();\n\n              case 8:\n                assetCount = _context.sent;\n                _context.next = 11;\n                return tracker.methods.getid().call();\n\n              case 11:\n                id = _context.sent;\n                console.log(id); // const info = await web3.eth.getBlock(blockNumber);\n                // console.log(info);\n\n                _context.next = 15;\n                return _Promise.all(Array(_parseInt(assetCount)).fill().map(function (element, index) {\n                  return tracker.methods.assets(index).call();\n                }));\n\n              case 15:\n                assets = _context.sent;\n                return _context.abrupt(\"return\", {\n                  buyers: buyers,\n                  producers: producers,\n                  assets: assets,\n                  assetCount: assetCount\n                });\n\n              case 17:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function getInitialProps(_x) {\n        return _getInitialProps.apply(this, arguments);\n      }\n\n      return getInitialProps;\n    }()\n  }]);\n\n  return AssetTracker;\n}(Component);\n\nexport default AssetTracker;","map":null,"metadata":{},"sourceType":"module"}